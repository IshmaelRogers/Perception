# Ishmael Rogers
# Robotics Software Engineer, Infinitely Deep Robotics Group
# www.idrg.io
# Atlanta, Ga 
# 2018 

# Clustering for Segmentation 

# Object Segmentation 

We know that segmentation is the process of dividing point cloud data into meaningful subsets using a common property.

After filtering point cloud data and apply RANSAC to remove usless information from the scene. Now we will.. 
Combine color information with shape information to perform complex segmentation task.

Clustering allow us to segment objects in point cloud without assuming a model shape. FInd points in dataset that are clustered together based on certain a feature (or collection of features)

0. Color
1. Shape 
2. Position
3. Texture 

# Downside of Model Fitting

Relying solely on the RANSAC algorithm to segment objects in a scene is not always ideal if you are dealing with a cluttered environment with little or no prior information about the number of objects in the scene. Furthermore, this method can induce false positives if there are many objects present that could fit the same shape model as the target object. For example, if my target object is a can of soda, a scene filled with other cylindrical objects can cause the robot to become confused.   

A scene that has objects of various shapes also present a problem when using the RANSAC approach. Recall, in the RANSAC algorithm we specified a model to be removed. If the image taken in by the system has different types of shapes, a model would need to be created and processed individually. This would require a lot of computation power. 

RGB-D cameras provide data that is rich in features such as color and texture. We now explore the process of using these features to segment the objects we are looking for.

# Clustering 

Is the process of finding similarities among individual points in some point cloud data so that they may be segmented. By clustering data we provide our robot with a way to determine which components of a dataset naturally belong together.
NOTE: Clustering can be performed based on spatial neighborhood as well as color. 

In this repository we will use two different approaches for clustering

 0. K-means
 - An iterative, unsupervised learning algorithm works by dividing the input data into a key number of clusters based on one or more features or properties.
1. Euclidean
 - A clustering technique by which points that are closer to each other are clustered together by making use of a 3D grid subdivision of the space.

# K-means Clustering 
K-means clustering is the most simple and widely used cluster technique clustering technique in computer vision, machine learning and data mining.

The Algorithm
---
Given a dataset containing n number of points plotted based on two or more features, we would like to cluster the points together into k different clusters: 
 0. Randomly select k initial centroids: <a href="https://www.codecogs.com/eqnedit.php?latex=(c_{1},&space;c_{2},\cdots,&space;c_{k}&space;)" target="_blank"><img src="https://latex.codecogs.com/gif.latex?(c_{1},&space;c_{2},\cdots,&space;c_{k}&space;)" title="(c_{1}, c_{2},\cdots, c_{k} )" /></a>
 1. Create k clusters by calculating the distance from each point to each centroid and then label the point with the centroid color closest to it.
 NOTE: The partition created in this step represent a Voronoi diagram generated by the centroids
 2. A new centroid is calculated for each cluster by calculating the average of all data points with the same label.
 NOTE: The centroids <a href="https://www.codecogs.com/eqnedit.php?latex=(c_{1},&space;c_{2},\cdots,&space;c_{k}&space;)" target="_blank"><img src="https://latex.codecogs.com/gif.latex?(c_{1},&space;c_{2},\cdots,&space;c_{k}&space;)" title="(c_{1}, c_{2},\cdots, c_{k} )" /></a> will shift to the new location 
 3. Repeat steps 1 and 2 until the following criteria are met:
    a. The number of iterations reach a specified limit.
    b. Convergence is achieved by reaching a specified tolerance between two consecutive centroid locations.
 NOTE: The process of clustering will result in k number of diffeent items grouped from the dataset clustered together based on the features specifed on the axis of the plot.

# DBSCAN Algorithm

# DBSCAN vs K-means

# Clustering with PCL 

# Publishing a Point Cloud 

# Flitering and RANSAC

# Clustering Objects

# Cluster Visualization



